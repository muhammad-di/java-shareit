-- delete all tables

DROP TABLE IF EXISTS users      CASCADE;
DROP TABLE IF EXISTS item       CASCADE;
DROP TABLE IF EXISTS users_item CASCADE;


-- create user related tables

CREATE TABLE IF NOT EXISTS users
(
user_id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name 	VARCHAR NOT NULL,
email   VARCHAR NOT NULL,
CONSTRAINT users_email_unique_constraint UNIQUE (email)
);

CREATE TABLE IF NOT EXISTS item
(
item_id     INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
name 	    VARCHAR NOT NULL,
description VARCHAR NOT NULL,
available   BOOLEAN DEFAULT FALSE
);

CREATE TABLE IF NOT EXISTS users_item
(
id      INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
user_id INTEGER NOT NULL REFERENCES users (user_id) ON DELETE CASCADE,
item_id INTEGER NOT NULL REFERENCES item (item_id) ON DELETE CASCADE
);